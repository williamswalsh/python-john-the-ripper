<#ftl ns_prefixes={
    "xsd":"http://www.w3.org/2001/XMLSchema",
    "ds":"http://www.w3.org/2000/09/xmldsig#",
    "eds":"urn:digitary.framework.ie:2005:09:eds",
    "digitary":"urn:digitary.org:securedocument:instance",
    "dty":"urn:framework.ie:digitary:system:schema-annotations"}
>   
<fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
	<fo:layout-master-set>
		<fo:simple-page-master master-name="simpleA4" page-height="29.7cm" page-width="21cm" margin-top="10mm" margin-bottom="5mm" margin-left="10mm" margin-right="10mm">
			<fo:region-body/>
		</fo:simple-page-master>
	</fo:layout-master-set>

	<fo:page-sequence master-reference="simpleA4">
		<fo:flow flow-name="xsl-region-body">

			<!--
			Titles
			-->
			<fo:block font-size="14pt"
				text-align="center" 
				space-after="1cm">Digitary University Document Access Ticket</fo:block>
			<fo:block font-size="8pt" family="Verdana,Sans-Serif" 
				text-align="justify" space-after="5mm">
				As and from September 2005, Digitary University has deployed the Digitary secure electronic document system for issuing and verifying academic qualifications online.  
			</fo:block>	   

			<fo:block font-size="10pt"
				text-align="left" space-after="1mm">
				What is this document?
			</fo:block>

			<fo:block font-size="8pt" family="Verdana,Sans-Serif" 
				text-align="justify" space-after="5mm">
				This is a Document Access Ticket that has been uniquely generated by a graduate of Digitary University using the Digitary system. This document contains a 
				unique Document Access Code that can be used to verify the authenticity of the graduate's qualifications via a secure site at Digitary University.
			</fo:block>

			<fo:block font-size="10pt"
				text-align="left" space-after="1mm">
				I am a graduate of Digitary University - How do I use this document?
			</fo:block>

			<fo:block font-size="8pt" family="Verdana,Sans-Serif" 
				text-align="justify" space-after="5mm">
				Simply give a copy of this page to prospective employers or other third parties that need to verify your qualifications. The text on this document provides a 
				brief introduction to the concept of the access ticket to third parties.
			</fo:block>

			<fo:block font-size="10pt"
				text-align="left" space-after="1mm">
				I am an employer or other third party - I have received this document from a graduate of Digitary University 
			</fo:block>

			<fo:block font-size="8pt" family="Verdana,Sans-Serif" 
				text-align="justify" space-after="5mm">
				To verify the graduate's document, you must log on to the Digitary system at Digitary University. You will need to register your details depending on whether 
				or not the owner of the document has requested this. Using a web browser, connect to https://digitary.framework.ie and follow the instructions. When prompted to enter
				a document authentication code, enter the Document Access Code given below.
			</fo:block>

			<fo:block font-size="10pt"
				text-align="left" space-after="1mm">
				Where can I find more information about the Digitary system at Digitary University? 
			</fo:block>

			<fo:block font-size="8pt" family="Verdana,Sans-Serif" 
				text-align="justify" space-after="1cm">
				Log on to the Digitary website at Digitary University. The URL is: https://digitary.framework.ie 
			</fo:block>


			<!-- Ticket details TABLE -->
			<fo:table width="19cm" table-layout="fixed" display-align="center" background-color="#99CCD6" border="0.5pt solid black" margin="20px">
				<fo:table-column column-width="5cm"/>
				<fo:table-column column-width="14cm"/>
				<fo:table-body>
					<fo:table-row>
						<fo:table-cell number-columns-spanned="2" padding-top="10px">
							<fo:block text-align="center" background-color="white" space-after="5mm" font-size="12pt" border-style="solid" border-width="0.3pt" border-color="black" padding-top="4px" padding-bottom="4px">Ticket Details</fo:block>
						</fo:table-cell>
					</fo:table-row>
					<fo:table-row>
						<fo:table-cell text-align="left">
							<fo:block font-size="10pt" text-align="left" font-weight="bold" space-after="2mm">Verification URL:</fo:block>
						</fo:table-cell>
						<fo:table-cell padding-left="2px" text-align="left">
							<fo:block font-size="10pt" text-align="left" space-after="2mm">
								<fo:basic-link color="blue" external-destination="${verifierhardcopyurl}">${verifierhardcopyurl}</fo:basic-link>
							</fo:block>
						</fo:table-cell>
					</fo:table-row>
					<fo:table-row>
						<fo:table-cell text-align="left">
							<fo:block font-size="10pt" text-align="left" font-weight="bold" space-after="2mm">Access Code:</fo:block>
						</fo:table-cell>
						<fo:table-cell padding-left="2px" text-align="left">
							<fo:block font-size="10pt" text-align="left" space-after="2mm">${ticket.getTicketId()}</fo:block>
						</fo:table-cell>
					</fo:table-row>
					<fo:table-row>
						<fo:table-cell text-align="left">
							<fo:block font-size="10pt" text-align="left" font-weight="bold" space-after="2mm">Ticket is verifiable by:</fo:block>
						</fo:table-cell>
						<fo:table-cell padding-left="2px" text-align="left">
						    <#assign accessType = ticket.getAccessType()?int />						
   							<#if accessType == 2>
   							   <fo:block font-size="10pt" text-align="left" space-after="2mm">${ticket.getRecipient()}</fo:block>
   							<#else>
						       <fo:block font-size="10pt" text-align="left" space-after="2mm">Any user that has registered with Digitary University's online verifier site</fo:block>
   							</#if>
						</fo:table-cell>
					</fo:table-row>
					<fo:table-row>
						<fo:table-cell text-align="left">
							<fo:block font-size="10pt" text-align="left" font-weight="bold" space-after="2mm">This ticket is valid until:</fo:block>
						</fo:table-cell>
  		                <#assign expiry = ticket.getExpires() />
						<fo:table-cell padding-left="2px" text-align="left">
							<#if expiry == "-1">
								<fo:block font-size="10pt" text-align="left" space-after="2mm">This ticket has an unlimited validity period</fo:block>
							<#else>
								<fo:block font-size="10pt" text-align="left" space-after="2mm">${formatter.formatDate($expiry)}</fo:block>
							</#if>
						</fo:table-cell>
					</fo:table-row>
					<fo:table-row>
						<fo:table-cell number-columns-spanned="2" padding-top="10px">
							<fo:block text-align="center" background-color="white" space-after="5mm" font-size="12pt" border-style="solid" border-width="0.3pt" border-color="black" padding-top="4px" padding-bottom="4px">Document Details</fo:block>
						</fo:table-cell>
					</fo:table-row>
					<fo:table-row>
						<fo:table-cell text-align="left">
							<fo:block font-size="10pt" text-align="left" font-weight="bold" space-after="2mm">This ticket is for the following type of document:</fo:block>
						</fo:table-cell>
						<fo:table-cell padding-left="2px" text-align="left">
							<fo:block font-size="10pt" text-align="left" space-after="2mm">${document.getProfileDTO().getProfileName()}</fo:block>
						</fo:table-cell>
					</fo:table-row>
					<fo:table-row>
						<fo:table-cell text-align="left">
							<fo:block font-size="10pt" text-align="left" font-weight="bold" space-after="2mm">This ticket was generated by:</fo:block>
						</fo:table-cell>
						<fo:table-cell padding-left="2px" text-align="left">
							<fo:block font-size="10pt" text-align="left" space-after="2mm">${user.getFullName()} <#if user.getEmailAddress()?exists>(<a href="mailto:${user.getEmailAddress()}">${user.getEmailAddress()}</a>)</#if></fo:block>
						</fo:table-cell>
					</fo:table-row>
				</fo:table-body>
			</fo:table>
		</fo:flow>
	</fo:page-sequence>
</fo:root>
